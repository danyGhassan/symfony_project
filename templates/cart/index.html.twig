{% extends 'base.html.twig' %}

{% block title %}Mon Panier{% endblock %}

{% block body %}
    <h1>Mon Panier</h1>

    {% if articles is empty %}
        <p>Votre panier est vide.</p>
    {% else %}
        <ul>
            {% for article in articles %}
                <li>
                    <strong>{{ article.nom }}</strong> - {{ article.prix }} €
                    <p>{{ article.description }}</p>
                    
                    <form action="{{ path('app_cart_update', {id: article.id, quantity: cart[article.id] + 1}) }}" method="post">
                        <button type="submit">Augmenter la quantité</button>
                    </form>
                    
                    <form action="{{ path('app_cart_update', {id: article.id, quantity: cart[article.id] - 1}) }}" method="post">
                        <button type="submit">Diminuer la quantité</button>
                    </form>
                    
                    <form action="{{ path('app_cart_remove', {id: article.id}) }}" method="post">
                        <button type="submit">Supprimer</button>
                    </form>
                    
                </li>
            {% endfor %}
        </ul>

        <p><strong>Total : </strong>{{ total }} €</p>

        {% if total <= app.user.solde %}
            <form action="{{ path('app_cart_checkout') }}" method="post">
                <button type="submit">Passer la commande</button>
            </form>
        {% else %}
            <p>Votre solde est insuffisant pour passer la commande.</p>
        {% endif %}
    {% endif %}

{% endblock %}
